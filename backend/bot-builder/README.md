# Bot Builder AI Agent

–ò–ò-–∞–≥–µ–Ω—Ç –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —Å–æ–∑–¥–∞–Ω–∏—è –±–æ—Ç–æ–≤ –ø–æ —Ç–µ–∫—Å—Ç–æ–≤–æ–º—É –æ–ø–∏—Å–∞–Ω–∏—é.

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- ü§ñ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –±–æ—Ç–æ–≤ –∏–∑ —Ç–µ–∫—Å—Ç–æ–≤–æ–≥–æ –æ–ø–∏—Å–∞–Ω–∏—è
- üé® –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –≤–∏–∑—É–∞–ª—å–Ω–æ–≥–æ (N8N) –∏ –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ–≥–æ (–∫–æ–¥) —Ä–µ–∂–∏–º–æ–≤
- üß† –ë–∞–∑–∞ –∑–Ω–∞–Ω–∏–π –ø–æ —Å–æ–∑–¥–∞–Ω–∏—é –±–æ—Ç–æ–≤ (Telegram, WhatsApp, VK)
- üí¨ –î–∏–∞–ª–æ–≥–æ–≤—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Å –∏—Å—Ç–æ—Ä–∏–µ–π –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
- ‚úèÔ∏è –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –±–æ—Ç–æ–≤
- üìä –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏ –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ –ë–î

## –ú–æ–¥–µ–ª—å

- **DeepSeek R1T2 Chimera** (tngtech/deepseek-r1t2-chimera:free)
- –°–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –º–æ–¥–µ–ª—å –¥–ª—è —Ä–∞—Å—Å—É–∂–¥–µ–Ω–∏–π –∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∫–æ–¥–∞
- –ë–µ—Å–ø–ª–∞—Ç–Ω—ã–π –¥–æ—Å—Ç—É–ø —á–µ—Ä–µ–∑ OpenRouter

## –ë–∞–∑–∞ –∑–Ω–∞–Ω–∏–π

–ê–≥–µ–Ω—Ç –æ–±—É—á–µ–Ω –Ω–∞:

1. **–í–∏–∑—É–∞–ª—å–Ω—ã–π –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä (N8N-–ø–æ–¥–æ–±–Ω—ã–π)**
   - Drag & drop –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
   - –¢–∏–ø—ã –Ω–æ–¥–æ–≤: —Ç—Ä–∏–≥–≥–µ—Ä—ã, AI –∞–≥–µ–Ω—Ç—ã, –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
   - RAG (Retrieval Augmented Generation)
   - Multi-agent —Å–∏—Å—Ç–µ–º—ã

2. **–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π —Ä–µ–∂–∏–º (Python)**
   - Telegram Bot API (python-telegram-bot)
   - AI –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ (OpenAI, Claude, YandexGPT)
   - ConversationHandler –¥–ª—è –¥–∏–∞–ª–æ–≥–æ–≤
   - –ö–Ω–æ–ø–∫–∏ –∏ inline –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã

3. **–õ—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏**
   - –ü—Ä–æ–º–ø—Ç-–∏–Ω–∂–∏–Ω–∏—Ä–∏–Ω–≥
   - –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
   - –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ —Ç–æ–∫–µ–Ω—ã
   - –î–µ–ø–ª–æ–π –∏ —Ö–æ—Å—Ç–∏–Ω–≥

## API

### Endpoint
```
POST https://functions.poehali.dev/f74c949b-7d94-4880-aedd-ac4442889227
```

### Request
```json
{
  "prompt": "–°–æ–∑–¥–∞–π –±–æ—Ç–∞ –¥–ª—è —Å–ª—É–∂–±—ã –ø–æ–¥–¥–µ—Ä–∂–∫–∏",
  "mode": "visual",
  "history": [
    {"role": "user", "content": "..."},
    {"role": "assistant", "content": "..."}
  ]
}
```

### Response (Visual Mode)
```json
{
  "success": true,
  "botConfig": {
    "botName": "–ë–æ—Ç –ø–æ–¥–¥–µ—Ä–∂–∫–∏",
    "description": "AI-–±–æ—Ç –¥–ª—è –æ—Ç–≤–µ—Ç–æ–≤ –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã –∫–ª–∏–µ–Ω—Ç–æ–≤",
    "nodes": [
      {
        "id": "node1",
        "type": "Telegram Trigger",
        "label": "–ü–æ–ª—É—á–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è",
        "position": {"x": 100, "y": 100},
        "config": {"botToken": "{{TELEGRAM_BOT_TOKEN}}"}
      },
      {
        "id": "node2",
        "type": "AI Agent",
        "label": "–û–±—Ä–∞–±–æ—Ç–∫–∞ AI",
        "position": {"x": 300, "y": 100},
        "config": {
          "model": "OpenAI Chat Model",
          "systemPrompt": "–¢—ã –ø–æ–º–æ—â–Ω–∏–∫ —Å–ª—É–∂–±—ã –ø–æ–¥–¥–µ—Ä–∂–∫–∏",
          "memory": "Simple Memory"
        }
      }
    ],
    "connections": [
      {"from": "node1", "to": "node2"}
    ],
    "explanation": "–ü–æ—à–∞–≥–æ–≤–æ–µ –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ",
    "nextSteps": ["–ü–æ–¥–∫–ª—é—á–∏—Ç—å —Ç–æ–∫–µ–Ω Telegram", "–ù–∞—Å—Ç—Ä–æ–∏—Ç—å AI –º–æ–¥–µ–ª—å"]
  }
}
```

### Response (Professional Mode)
```json
{
  "success": true,
  "botConfig": {
    "botName": "Telegram Support Bot",
    "description": "Python –±–æ—Ç –¥–ª—è —Å–ª—É–∂–±—ã –ø–æ–¥–¥–µ—Ä–∂–∫–∏",
    "language": "python",
    "code": "# –ü–æ–ª–Ω—ã–π –∫–æ–¥ –±–æ—Ç–∞...",
    "dependencies": ["python-telegram-bot", "openai"],
    "envVars": ["TELEGRAM_BOT_TOKEN", "OPENAI_API_KEY"],
    "setupInstructions": "1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏...",
    "explanation": "–û–±—ä—è—Å–Ω–µ–Ω–∏–µ –∫–ª—é—á–µ–≤—ã—Ö —á–∞—Å—Ç–µ–π",
    "nextSteps": ["–°–æ–∑–¥–∞—Ç—å –±–æ—Ç–∞ –≤ @BotFather", "–î–æ–±–∞–≤–∏—Ç—å API –∫–ª—é—á–∏"]
  }
}
```

## –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

–ò—Å—Ç–æ—Ä–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ —Ç–∞–±–ª–∏—Ü–µ `bot_builder_history`:

```sql
CREATE TABLE bot_builder_history (
    id SERIAL PRIMARY KEY,
    user_id VARCHAR(255) NOT NULL,
    mode VARCHAR(50) NOT NULL,
    user_prompt TEXT NOT NULL,
    bot_config JSONB NOT NULL,
    conversation_history JSONB DEFAULT '[]'::jsonb,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```

## –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ü—Ä–æ—Å—Ç–æ–π –±–æ—Ç –ø–æ–¥–¥–µ—Ä–∂–∫–∏
```
–ü—Ä–æ–º–ø—Ç: "–°–æ–∑–¥–∞–π –±–æ—Ç–∞ –¥–ª—è Telegram –∫–æ—Ç–æ—Ä—ã–π –æ—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã —Å –ø–æ–º–æ—â—å—é AI"
```

### –ë–æ—Ç –¥–ª—è –ø—Ä–∏–µ–º–∞ –∑–∞–∫–∞–∑–æ–≤
```
–ü—Ä–æ–º–ø—Ç: "–ù—É–∂–µ–Ω –±–æ—Ç –¥–ª—è –ø—Ä–∏–µ–º–∞ –∑–∞–∫–∞–∑–æ–≤ –≤ —Ä–µ—Å—Ç–æ—Ä–∞–Ω —Å –∫–Ω–æ–ø–∫–∞–º–∏ –º–µ–Ω—é"
```

### –ë–æ—Ç —Å –±–∞–∑–æ–π –∑–Ω–∞–Ω–∏–π (RAG)
```
–ü—Ä–æ–º–ø—Ç: "–°–æ–∑–¥–∞–π –±–æ—Ç–∞ —Å –±–∞–∑–æ–π –∑–Ω–∞–Ω–∏–π –ø–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –Ω–∞—à–µ–≥–æ –ø—Ä–æ–¥—É–∫—Ç–∞"
```

### –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ –±–æ—Ç–∞
```
–ü—Ä–æ–º–ø—Ç: "–î–æ–±–∞–≤—å –∫–Ω–æ–ø–∫–∏ —Å –æ—Å–Ω–æ–≤–Ω—ã–º–∏ —Ä–∞–∑–¥–µ–ª–∞–º–∏ –º–µ–Ω—é"
```

## –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

- –ú–∞–∫—Å–∏–º—É–º 4000 —Ç–æ–∫–µ–Ω–æ–≤ –≤ –æ—Ç–≤–µ—Ç–µ
- Timeout: 45 —Å–µ–∫—É–Ω–¥
- Retry: –¥–æ 2 –ø–æ–ø—ã—Ç–æ–∫ –ø—Ä–∏ –æ—à–∏–±–∫–µ

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

- Python 3.11
- OpenRouter API (DeepSeek R1T2 Chimera)
- PostgreSQL (–∏—Å—Ç–æ—Ä–∏—è)
- Cloud Functions (Yandex Cloud)
